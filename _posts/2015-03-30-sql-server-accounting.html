---
layout: post
title: "Создание учетной системы в SQL Server"
date: '2015-03-30T10:00:00.000+03:00'
author: "Станислав Выщепан"
tags:
- sql server
- "быстродействие"
- sql
modified_time: '2015-03-30T10:00:13.307+03:00'
blogger_id: tag:blogger.com,1999:blog-1302241583051203640.post-6864425426474403959
blogger_orig_url: http://blog.gandjustas.ru/2015/03/sql-server-accounting.html
---

<p>На эту тему я выступал на SQL Server User Group 26 марта 2015 года. Ниже запись доклада:</p> <div id="scid:5737277B-5D6D-4f48-ABFC-DD9C333F4C5D:6ba37352-672d-4460-9503-da1dd5d3d4ce" class="wlWriterEditableSmartContent" style="float: none; padding-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px"><div><object width="448" height="252"><param name="movie" value="http://www.youtube.com/v/4yz52rAroJs?hl=en&amp;hd=1"></param><embed src="http://www.youtube.com/v/4yz52rAroJs?hl=en&amp;hd=1" type="application/x-shockwave-flash" width="448" height="252"></embed></object></div></div> <p>Увы, последние несколько минут на видео не попали, так как камера разрядилась.</p> <p>В докладе я рассказывал как реализовать двойную бухгалтерскую запись в SQL Server и как получать баланс за любой диапазон дат за доли секунды на 100 миллионах проводок.</p> <p>T-SQL скрипты, используемые в презентации, доступны по ссылке <a title="http://1drv.ms/1D9PCdN" href="http://1drv.ms/1D9PCdN">http://1drv.ms/1D9PCdN</a></p> <p>В докладе не смог рассказать про использование Clustered Columnstore Index для решения задач учетной системы. В первую очередь потому, что они не позволяют ускорить вычисление баланса по всей системе, это работа для индексированных представлений. Но эксперименты показали, что использование CCI на таблице проводок удобно, в том случае если аналитические признаки являются отдельным колонками в таблице проводок и часто делаются запросы, которые выбирают записи по нескольким признакам.</p> <p>Например если вы делаете складскую систему, то наиболее частые запросы будут – движения товаров за период по поставщикам\клиентам\товарам. Такие запросы прекрасно обрабатываются CCI индексами.</p> <p>Кроме того объем занимаемых данных CCI индекса будет небольшим, за счет сжатия, в случае множества одинаковых значений в колонках, да еще и обрабатываться будет быстрее.</p> <p>Если у вас есть интересные истории о создании учетных систем, особенно на других движках БД – делитесь в комментах.</p>  