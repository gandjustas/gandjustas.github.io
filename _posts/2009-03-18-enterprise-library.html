---
layout: post
title: "Применение Enterprise Library"
date: '2009-03-18T00:59:00.001+03:00'
author: "Станислав Выщепан"
tags:
- Unity
- ".NET"
- Enterprise Library
modified_time: '2009-03-18T00:59:27.636+03:00'
blogger_id: tag:blogger.com,1999:blog-1302241583051203640.post-5694513052621727003
blogger_orig_url: http://blog.gandjustas.ru/2009/03/enterprise-library.html
redirect_from: /2009/03/enterprise-library.html
category: Архиетктура приложений
---

<p>Все возможности Enterprise Library можно применять по-отдельности и радоваться жизни. Но если бы это была единственная возможность я бы не написал этот пост.</p>  <p>Магия начинается в сборке Microsoft.Practices.EnterpriseLibrary.PolicyInjection.CallHandlers.    <br />В этой сборке в одноименном неймспейсе содержатся call handlerы и атрибуты для навешивания обработчиков на методы. Как использовать call handlerы я рассказывал в <a href="http://gandjustas.blogspot.com/2009/01/aop-unity.html">этом посте</a>.</p>  <p>Кратко опишу доступные хендлеры:</p>  <ul>   <li><strong>AuthorizationCallHandler </strong>– задействует Security Application Block для авторизации при вызове перехваченного метода </li>    <li><strong>CachingCallHandler – </strong>обработчик, кеширующий результаты вызова перехваченного метода средствами Caching Application Block. Может быть чрезвычайно полезным для веб-разработки. </li>    <li><strong>ExceptionCallHandler</strong> – позволяет декларативно задавать стратегию обработки исключений в перехваченном методе. Стратегии задаются средствами Exception Handling Application Block. </li>    <li><strong>LogCallHandler – </strong>задействует Logging Application Block для логгирования вызова перехваченного метода. </li>    <li><strong>ValidationCallHandler – </strong>вызывает валидацию параметров метода. Параметры валидации должны быть заданы атрибутами или в конфигурации Validation Application Block. </li>    <li><strong>PerformanceCounterCallHandler –</strong> обработчик, который занимается сбором информации о параметрах быстродействия перехваченного метода. Информация сохраняется в PreformanceCounterах. В самой сборке Microsoft.Practices.EnterpriseLibrary.PolicyInjection.CallHandlers есть Installer (который можно запустить через installutil), создающий необходимые&#160; счетчики производительности. </li> </ul>  <p>Если интересует только runtime AOP, то можно использовать не полновесный IoC-контейнер Unity, а легковесный генератор прокси-классов из Policy Injection Application Block.</p>  <p>Кроме перехватчиков вызовов существует другой способ интеграции всех application blocks с контейнером Uinty. Практический каждый application block из состава enterprise library содержит класс – расширение Unity, которое контейнер возвращать объекты-фасады при запросе определенных типов.</p>  <p>Все расширения можно найти в основной сборке application block, в неймспейсе Configuration.Unity. Классы расширений называются ИмяБлокаExtension.</p>  <ul>   <li>Для Logging Application Block расширение заставляет Unity возвращать фасад логгера по запросу типа <strong>LogWriter</strong>. </li>    <li>Для Exception Handling Application Block&#160; основной тип фасада – <b>ExceptionManager.</b> </li>    <li>Для Caching Application Block контейнер возвращает реализации интерфейсов <strong>ICacheManager</strong>, <strong>IStorageEncryptionProvider, IBackingStore.</strong> </li>    <li>Для Security Application Block контейнер возвращает реализации интерфейсов <strong>IAuthorizationProvider, ISecurityCacheProvider.</strong> </li>    <li>Для Data Access Application Block контейнер возвращает экземпляры класса <strong>Database, </strong>аналогично <strong>DatabaseFactory.CreateDatabase.</strong> Можно получать как экземпляр по-умолчанию, так и именованный экземпляр. </li>    <li>Для Cryptography Application Block (который находится в сборке Microsoft.Practices.EnterpriseLibrary.Security.Cryptography) расширение заставляет Unity возвращать фасад по запросу типа <strong>CryptographyManager, </strong>а также реализации интерфейсов <strong>IHashProvider </strong>и <strong>ISymmetricCryptoProvider.</strong> </li> </ul>  <p>При использовании application blocks совместно с unity все настройки блоков надо задавать в файле конфигурации. Для этого в Enterpise Library есть удобная утилита.</p>  <p>К сожалению я не смог придумать адекватного примера, который сможет показать хотя бы малую часть возможностей Enterprise Library с использованием Unity.</p>  
